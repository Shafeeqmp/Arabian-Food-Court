<td>
    <% if (product.isDelete) { %>
        <button class="btn btn-primary btn-sm" onclick="restoreProduct('<%= product._id %>')">
            <i class="fas fa-recycle"></i> Restore
        </button>
    <% } else { %>
        <button class="btn btn-warning btn-sm" onclick="confirmEdit('<%= product._id %>', '<%= product.productname %>')">
            <i class="fas fa-edit"></i> Edit
        </button>
        <button class="btn btn-danger btn-sm" onclick="deleteconfirm('<%= product._id %>')">
            <i class="fas fa-trash"></i> Delete
        </button>
    <% } %>
</td>

<script>
     // Delete Product Section
  function deleteconfirm(productId) {
    Swal.fire({
        title: 'Are you sure?',
        text: "This action cannot be undone!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it!',
        cancelButtonText: 'Cancel'
    }).then((result) => {
        if (result.isConfirmed) {

            fetch(`/admin/deleteProduct/${productId}`, { 
                method: 'PUT'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire({
                        title: 'Deleted!',
                        text: 'Product has been deleted successfully.',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    }).then(() => {
                        location.reload();
                    });
                } else {
                    Swal.fire({
                        title: 'Failed!',
                        text: 'Failed to delete product.',
                        icon: 'error'
                    });
                }
            })
            .catch(error => {
                console.error('Error deleting product:', error);
                Swal.fire({
                    title: 'Error!',
                    text: 'delete An unexpected error occurred.',
                    icon: 'error'
                });
            });
        }
    });
}

</script>