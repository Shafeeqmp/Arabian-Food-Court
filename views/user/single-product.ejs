<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Single Product Page with Responsive Zoom</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        .product-image-wrapper {
            position: relative;
            width: 100%;
            max-width: 400px; /* Adjust to your desired size */
        }

        .product-image {
            width: 100%;
            display: block;
            cursor: pointer;
        }

        /* Zoom container that will show the zoomed portion */
        .zoom-result {
            width: 400px;
            height: 400px;
            position: absolute;
            top: 0;
            left: 110%;
            border: 1px solid #ccc;
            overflow: hidden;
            background-color: white;
            z-index: 3;
            display: none; /* Hidden by default */
        }

        /* Zoomed image inside the zoom result container */
        .zoom-result img {
            position: absolute;
            width: 1000px; /* Larger image size for zoom */
        }

        .product-description {
            font-size: 1.2rem;
        }

        .price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #28a745;
        }

        .product-title {
            font-size: 2rem;
            font-weight: bold;
        }

        .product-info {
            margin-top: 20px;
        }

        /* Media queries to hide side zoom on small screens */
        @media (max-width: 768px) {
            .zoom-result {
                display: none !important;
            }
        }
    </style>
</head>
<body>

    <div class="container my-5">
        <div class="row">
            <div class="col-md-6">
                <div class="product-image-wrapper" id="product-image-wrapper">
                    <img id="product-image" src="/public/<%= Product.images[0] %>" alt="" class="img-fluid product-image" data-toggle="modal" data-target="#productModal">
                    <img id="product-image" src="/public/<%= Product.images[1] %>" alt="" class="img-fluid product-image" data-toggle="modal" data-target="#productModal">
                    <img id="product-image" src="/public/<%= Product.images[2] %>" alt="" class="img-fluid product-image" data-toggle="modal" data-target="#productModal">
                    <img id="product-image" src="/public/<%= Product.images[3] %>" alt="" class="img-fluid product-image" data-toggle="modal" data-target="#productModal">
                    <div class="zoom-result" id="zoom-result">
                        <img  src="/public/<%= Product.images[0] %>" id="zoomed-image" alt="">
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <h1 class="product-title"><%=Product.productname %></h1>
                <p class="price">â‚¹<%= Product.price %></p>
                <p class="product-description">
                    <%= Product.description %>
                </p>
                <div class="product-info">
                    <button class="btn btn-primary btn-lg">Add to Cart</button>
                </div>
            </div>
        </div>
        
    </div>

    <!-- Modal for Small Screen Zoom -->
    <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalLabel">Product Zoom</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <img src="/public/<%= Product.images[0] %>" alt="Product Zoom Image" class="img-fluid modal-img"> <!-- Replace with larger image -->
                    <img src="/public/<%= Product.images[1] %>" alt="Product Zoom Image" class="img-fluid modal-img"> <!-- Replace with larger image -->
                    <img src="/public/<%= Product.images[2] %>" alt="Product Zoom Image" class="img-fluid modal-img"> <!-- Replace with larger image -->
                    <img src="/public/<%= Product.images[3] %>" alt="Product Zoom Image" class="img-fluid modal-img"> <!-- Replace with larger image -->
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

    <script>
        // Side zoom effect JavaScript for larger screens
        const productImage = document.getElementById("product-image");
        const zoomResult = document.getElementById("zoom-result");
        const zoomedImage = document.getElementById("zoomed-image");

        productImage.addEventListener("mousemove", function(e) {
            if (window.innerWidth > 768) { // Only apply zoom on larger screens
                zoomResult.style.display = "block"; // Show zoom result

                const pos = getCursorPos(e);
                const x = pos.x;
                const y = pos.y;

                // Move the zoomed image
                const zoomWidth = zoomedImage.offsetWidth;
                const zoomHeight = zoomedImage.offsetHeight;
                const imageWidth = productImage.offsetWidth;
                const imageHeight = productImage.offsetHeight;

                const zoomFactor = zoomWidth / imageWidth;

                const newX = x * zoomFactor - zoomResult.offsetWidth / 2;
                const newY = y * zoomFactor - zoomResult.offsetHeight / 2;

                zoomedImage.style.left = `-${newX}px`;
                zoomedImage.style.top = `-${newY}px`;
            }
        });

        productImage.addEventListener("mouseleave", function() {
            zoomResult.style.display = "none"; // Hide zoom result when mouse leaves
        });

        // Get the position of the mouse relative to the image
        function getCursorPos(e) {
            const imageRect = productImage.getBoundingClientRect();
            const x = e.pageX - imageRect.left - window.scrollX;
            const y = e.pageY - imageRect.top - window.scrollY;
            return { x: x, y: y };
        }
    </script>
</body>
</html>
